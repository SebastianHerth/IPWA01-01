
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <h1>Ihre Spende wurde erfolgreich registriert!</h1>
        <h2 class="pt-3">Zusammenfassung:</h2>
        <ul class="list-group pt-3">
            <li class="list-group-item"><b>Referenz: </b><span id="id"></span></li>
            <li class="list-group-item"><b>Datum/Uhrzeit: </b><span id="date"> </span></li>
            <li class="list-group-item"><b>Name: </b><span id="gender"></span> <span id="firstname"></span> <span id="lastname"></span></li>
            <li class="list-group-item"><b>Telefonnummer: </b>: <span id="phone"> </span></li>
            <li class="list-group-item"><b>E-Mail: </b><span id="mail"> </span></li>
            <li class="list-group-item pt-3"><i><span id="deliveryType"></span></i></li>
            <li class="list-group-item"><b>Straße und Hausnummer: </b><span id="street"></span> <span id="housenumber"></span></li>
            <li class="list-group-item"><b>PLZ/Ort: </b><span id="postcode"></span> <span id="city"></span></li>
            <li class="list-group-item"><b>Beschreibung: </b><span id="clothingDescription"></span></li>
            <li class="list-group-item"><b>Hilfsprojekt: </b><span id="project"></span></li>
        </ul>
        <p class="mt-4">Sollten die hier dargestellten Daten fehlerhaft sein, oder sollten Änderungswünsche Ihrerseits vorliegen, können Sie uns gerne kontaktieren. Um Ihre registrierte Spende schnellstmöglich zu finden, teilen Sie uns bitte Ihre Spendenreferenznummer mit.</p>
        <a href="index.html"><strong>Zurück zur Hauptseite</strong></a>
    </div>


</body>
<script>


function getParameter(parameter){

	let url = window.location.search.substring(1);
	let parameters = url.split("&");
	
	for (let i = 0; i < parameters.length; i++) {
		let singleParameter = parameters[i].split("=");
		if (parameter == singleParameter[0]){
		return(singleParameter[1]);
}
	}

}

function writeForm(){
    let today = new Date();
    let day = today.getDate();
    let month = today.getMonth();
    let year = today.getFullYear();
    let minute = today.getMinutes();
    let firstname = decodeURIComponent(getParameter("firstname"));
    let lastname = decodeURIComponent(getParameter("lastname"));    //Wird als Variable deklariert, weil an mehreren Stellen benötigt
    if (String(minute).length == 1){
        minute = '0' + minute;
    }

    let time = today.getHours() + ":" + minute;

    month = month + 1;
    if (String(day).length == 1){
        day = '0' + day;
    }
    if (String(month).length == 1){
        month = '0' + month;
    }
    
    

    

    //
    // Hier ist der ID-Code - Eventuell in eigene FUnktion
    let IDCode = firstname.substring(0,1) + lastname.substring(0,1) + day + month + String(year).substring(2,4) + today.getSeconds();
    
    document.getElementById("id").innerHTML = IDCode;
    document.getElementById("date").innerHTML = day + '.' + month + '.' + year + ', ' + time;
    document.getElementById("gender").innerHTML = getParameter("gender");
    document.getElementById("firstname").innerHTML = firstname;
    document.getElementById("lastname").innerHTML = lastname;
    document.getElementById("phone").innerHTML = getParameter("phone");
    document.getElementById("mail").innerHTML = decodeURIComponent(getParameter("mail"));
    document.getElementById("clothingDescription").innerHTML = decodeURIComponent(getParameter("description").replace(/\+/g, ' '));
    document.getElementById("project").innerHTML = decodeURIComponent(getParameter("project"));
    

    if(getParameter("deliveryType")=="pickup"){
        document.getElementById("deliveryType").innerHTML = "Abholung durch Sammelfahrzeug an folgender Adresse:";
        document.getElementById("street").innerHTML = decodeURIComponent(getParameter("street"));
        document.getElementById("housenumber").innerHTML = getParameter("housenumber");
        document.getElementById("postcode").innerHTML = getParameter("postcode");
        document.getElementById("city").innerHTML = decodeURIComponent(getParameter("city"));
    }
    else{
        document.getElementById("deliveryType").innerHTML = "Persönliche Übergabe an unserer Geschäftsstelle:";
        document.getElementById("street").innerHTML = "Musterstraße";
        document.getElementById("housenumber").innerHTML = "12";
        document.getElementById("postcode").innerHTML = "12345";
        document.getElementById("city").innerHTML = "Musterstadt";
    }
    
        
}



writeForm();

</script>
</html>
